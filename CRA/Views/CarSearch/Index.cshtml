@using CarRental.MVC.Models

@model IEnumerable<CarViewModel>


@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_layout.cshtml";
}

<script>

    $(function () {

        var GetAllCars = function (url) {
            $.getJSON(url, function (data) {

                allcars = data;

              

                for(let car of data)
                {
                    let result = ("<li>" + 'CarID: ' + car.CarID + '</br>'
                        + 'Milliage: ' + car.Mileage + '</br>'
                        + 'Car Number: ' + car.CarNumber + "</li></br></br></br>")
                
                    
                    var imgSource = '@Url.Action("GetImage")'
                    var img = $('<img/>').attr('src', imgSource + "/" + car.ModelID)
                    .on('load', function () {
                       $('.carlist').append(img)
                    });


                                 
                 
                      
                   


                    $('.carlist').append(result);


            

                   
            }
            })

        }

        var allcarslink = '@Url.Action("GettAllCars", "CarSearch")';
        GetAllCars(allcarslink);
    });
</script>

<h2>Car Search</h2>
<main>
   


    <select name="transmission">
        <option value="0">Manual</option>
        <option value="1">Automatic</option>
    </select>

    <br />
    <select name="manufacturer">

    </select>
    <br />
    <select name="model"></select>
    <br />
    <input type="search" placeholder="search" />
    <br />
    <input type="datetime" />
    <br />
    
    <ul class="list-group carlist">
     
        </ul>

</main>